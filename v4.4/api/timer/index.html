
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This free CANopen Stack supports an timer handling with highest accuracy with no intermediate interrupts on your CANopen device.">
      
      
        <meta name="author" content="Embedded Office">
      
      
        <link rel="canonical" href="https://canopen-stack.org/v4.4/api/timer/">
      
      <link rel="icon" href="../../assets/images/favicon/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Timer Handling API Reference - CANopen Stack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#timer-handling" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CANopen Stack" class="md-header__button md-logo" aria-label="CANopen Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 17H7V7h10m4 4V9h-2V7a2 2 0 0 0-2-2h-2V3h-2v2h-2V3H9v2H7c-1.11 0-2 .89-2 2v2H3v2h2v2H3v2h2v2a2 2 0 0 0 2 2h2v2h2v-2h2v2h2v-2h2a2 2 0 0 0 2-2v-2h2v-2h-2v-2m-6 2h-2v-2h2m2-2H9v6h6V9Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CANopen Stack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Timer Handling API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/embedded-office/canopen-stack/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    canopen-stack
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../start/installation/" class="md-tabs__link">
        Quickstart
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../usage/architecture/" class="md-tabs__link">
        CANopen Usage
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../node/" class="md-tabs__link md-tabs__link--active">
        API Functions
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/flash-user-domain/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hardware/can/" class="md-tabs__link">
        Hardware Connection
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../license/" class="md-tabs__link">
      License
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CANopen Stack" class="md-nav__button md-logo" aria-label="CANopen Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 17H7V7h10m4 4V9h-2V7a2 2 0 0 0-2-2h-2V3h-2v2h-2V3H9v2H7c-1.11 0-2 .89-2 2v2H3v2h2v2H3v2h2v2a2 2 0 0 0 2 2h2v2h2v-2h2v2h2v-2h2a2 2 0 0 0 2-2v-2h2v-2h-2v-2m-6 2h-2v-2h2m2-2H9v6h6V9Z"/></svg>

    </a>
    CANopen Stack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/embedded-office/canopen-stack/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    canopen-stack
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Quickstart
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quickstart" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Quickstart
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../start/installation/" class="md-nav__link">
        Install Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../start/structure/" class="md-nav__link">
        Repository Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../start/quickstart/" class="md-nav__link">
        Quickstart Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          CANopen Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CANopen Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          CANopen Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/architecture/" class="md-nav__link">
        Device Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/overview/" class="md-nav__link">
        CANopen Stack Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/control/" class="md-nav__link">
        Controlling the Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/dictionary/" class="md-nav__link">
        Using Object Dictionary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/tpdo/" class="md-nav__link">
        Transmit PDO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/emergency/" class="md-nav__link">
        Emergency Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/actions/" class="md-nav__link">
        Timed Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/callbacks/" class="md-nav__link">
        Callback Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          API Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Functions" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          API Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node/" class="md-nav__link">
        CANopen Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dictionary/" class="md-nav__link">
        Object Dictionary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../emergency/" class="md-nav__link">
        Emergency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/" class="md-nav__link">
        Network Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../object/" class="md-nav__link">
        Object Entry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tpdo/" class="md-nav__link">
        TPDO Event
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interface/" class="md-nav__link">
        CAN Interface
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Timer Handling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Timer Handling
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-context" class="md-nav__link">
    Module Context
  </a>
  
    <nav class="md-nav" aria-label="Module Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-data" class="md-nav__link">
    Structure Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#member-functions" class="md-nav__link">
    Member Functions
  </a>
  
    <nav class="md-nav" aria-label="Member Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cotmrcreate" class="md-nav__link">
    COTmrCreate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrdelete" class="md-nav__link">
    COTmrDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrgetmintime" class="md-nav__link">
    COTmrGetMinTime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrgetticks" class="md-nav__link">
    COTmrGetTicks()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrprocess" class="md-nav__link">
    COTmrProcess()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrservice" class="md-nav__link">
    COTmrService()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parameter/" class="md-nav__link">
        Parameter Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../csdo/" class="md-nav__link">
        SDO Client
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/flash-user-domain/" class="md-nav__link">
        Firmware Upload
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/setup-calibration-mode/" class="md-nav__link">
        Calibration Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/write-serial-number/" class="md-nav__link">
        Write Serial Number
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/setup-dynamic-object-dictionary/" class="md-nav__link">
        Dynamic Dictionary I
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/use-dynamic-object-dictionary/" class="md-nav__link">
        Dynamic Dictionary II
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/usage-with-rtos-and-baremetal/" class="md-nav__link">
        RTOS and Baremetal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Hardware Connection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware Connection" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Hardware Connection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/can/" class="md-nav__link">
        CAN Driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/timer/" class="md-nav__link">
        Timer Driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/nvm/" class="md-nav__link">
        NVM Driver
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-context" class="md-nav__link">
    Module Context
  </a>
  
    <nav class="md-nav" aria-label="Module Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-data" class="md-nav__link">
    Structure Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#member-functions" class="md-nav__link">
    Member Functions
  </a>
  
    <nav class="md-nav" aria-label="Member Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cotmrcreate" class="md-nav__link">
    COTmrCreate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrdelete" class="md-nav__link">
    COTmrDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrgetmintime" class="md-nav__link">
    COTmrGetMinTime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrgetticks" class="md-nav__link">
    COTmrGetTicks()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrprocess" class="md-nav__link">
    COTmrProcess()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cotmrservice" class="md-nav__link">
    COTmrService()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="timer-handling">Timer Handling<a class="headerlink" href="#timer-handling" title="Permanent link">#</a></h1>
<p>The timer component provides an interface to function executions initiated by a timer.</p>
<h2 id="module-context">Module Context<a class="headerlink" href="#module-context" title="Permanent link">#</a></h2>
<pre class="mermaid"><code>classDiagram
  CO_NODE o-- CO_TMR
  CO_TMR_ACTION o-- CO_TMR : APool, Acts
  CO_TMR_TIME o-- CO_TMR : TPool, Free, Use, Elapsed
  class CO_TMR {
    -uint32_t Max
    -uint32_t Freq
    +COTmrCreate(start, cycle, function, para) int16_t
    +COTmrDelete(action) int16_t
    +COTmrGetMinTime(unit) uint16_t
    +COTmrGetTicks(time, unit) int32_t
    +COTmrProcess()
    +COTmrService() int16_t
  }</code></pre>
<h3 id="structure-data">Structure Data<a class="headerlink" href="#structure-data" title="Permanent link">#</a></h3>
<p>The class <code>CO_TMR</code> is defined within <code>co_tmr.h</code> and is responsible for the CANopen highspeed timer management. The following data members are in this class:</p>
<table>
<thead>
<tr>
<th>Data Member</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Acts</td>
<td><code>CO_TMR_ACTION*</code></td>
<td>pointer to the root of free actions linked list</td>
</tr>
<tr>
<td>APool[]</td>
<td><code>CO_TMR_ACTION</code></td>
<td>timer action pool array</td>
</tr>
<tr>
<td>Elapsed</td>
<td><code>CO_TMR_TIME*</code></td>
<td>pointer to the root of elapsed timers linked list</td>
</tr>
<tr>
<td>Free</td>
<td><code>CO_TMR_TIME*</code></td>
<td>pointer to the root of free events linked list</td>
</tr>
<tr>
<td>Freq</td>
<td><code>uint32_t</code></td>
<td>timer ticks per second</td>
</tr>
<tr>
<td>Max</td>
<td><code>uint32_t</code></td>
<td>maximum nunber of timed actions</td>
</tr>
<tr>
<td>Node</td>
<td><code>CO_NODE*</code></td>
<td>pointer to parent node object</td>
</tr>
<tr>
<td>TPool[]</td>
<td><code>CO_TMR_TIME</code></td>
<td>timer event pool array</td>
</tr>
<tr>
<td>Use</td>
<td><code>CO_TMR_TIME*</code></td>
<td>pointer to the root of used events linked list</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data within this structure must never be manipulated without the corresponding class member functions. This can lead to unpredictable behavior of the node.</p>
</div>
<h3 id="member-functions">Member Functions<a class="headerlink" href="#member-functions" title="Permanent link">#</a></h3>
<p>The following table describes the API functions of the CANopen timer module. With the listed functions we can define the execution of actions after a given time interval with or without a cycle time. The functions are implemented within the source files: <code>co_tmr.c/h</code>.</p>
<h4 id="cotmrcreate">COTmrCreate()<a class="headerlink" href="#cotmrcreate" title="Permanent link">#</a></h4>
<p>This function is used within the CANopen stack for timed actions. It is possible to use timed actions in the application, too.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int16_t</span><span class="w"> </span><span class="nf">COTmrCreate</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w">      </span><span class="o">*</span><span class="n">tmr</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="kt">uint32_t</span><span class="w">     </span><span class="n">start</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="kt">uint32_t</span><span class="w">     </span><span class="n">cycle</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="n">CO_TMR_FUNC</span><span class="w">  </span><span class="n">function</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="kt">void</span><span class="w">        </span><span class="o">*</span><span class="n">para</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
<tr>
<td>start</td>
<td>delta time in ticks for the first timer-event</td>
</tr>
<tr>
<td>cycle</td>
<td>if != 0, the delta time in ticks for the cyclic timer events</td>
</tr>
<tr>
<td>function</td>
<td>pointer to the action callback function</td>
</tr>
<tr>
<td>para</td>
<td>pointer to the callback function parameter</td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li><code>&gt;=0</code> : action identifier (successful operation)</li>
<li><code>&lt;0</code> : an error is detected</li>
</ul>
<p><strong>Example</strong></p>
<p>The following example installs a cyclic called function <code>AppCyclicFunc()</code> to the CANopen node AppNode. The timed function will be called the first time after 10ms and then every 25ms with the parameter: 0xcafe.</p>
<div class="highlight"><pre><span></span><code><span class="n">CO_TMR</span><span class="w">  </span><span class="o">*</span><span class="n">tmr</span><span class="p">;</span><span class="w"></span>
<span class="kt">int16_t</span><span class="w">  </span><span class="n">aid</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">start</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">cycle</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tmr</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">;</span><span class="w"></span>
<span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetTicks</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_1MS</span><span class="p">);</span><span class="w"></span>
<span class="n">cycle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetTicks</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_1MS</span><span class="p">);</span><span class="w"></span>
<span class="n">aid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrCreate</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">cycle</span><span class="p">,</span><span class="w"> </span><span class="n">AppCyclicFunc</span><span class="p">,</span><span class="w"> </span><span class="mh">0xcafe</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aid</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* tid holds the timer identifier */</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* error during creation of timed action */</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example assumes, that the timer callback function <code>AppCyclicFunc()</code> is implemented with the correct prototype. The hardware timer is configured with sufficient timer clock frequency to achieve the 5ms resolution.</p>
</div>
<h4 id="cotmrdelete">COTmrDelete()<a class="headerlink" href="#cotmrdelete" title="Permanent link">#</a></h4>
<p>This function is used within the CANopen stack for timed actions. It is possible to use timed actions in the application, too.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int16_t</span><span class="w"> </span><span class="nf">COTmrDelete</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w">  </span><span class="o">*</span><span class="n">tmr</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="kt">int16_t</span><span class="w">  </span><span class="n">action</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
<tr>
<td>action</td>
<td>action identifier, returned by <a href="../timer/#cotmrcreate" title="COTmrCreate()"><code>COTmrCreate()</code></a></td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li><code>&gt;=0</code> : action identifier (successful operation)</li>
<li><code>&lt;0</code> : an error is detected</li>
</ul>
<p><strong>Example</strong></p>
<p>The following calls a critical function <code>AppCritFunc()</code> and installs a function <code>AppEmcyFunc()</code> to the CANopen node AppNode to guarantee a maximum runtime of 150ms. The timed function will be called after 150ms and perform emergency handling with the parameter 0xdead. If the <code>AppCritFunc()</code> is finished before 150ms, the timed emergency function call will be removed.</p>
<div class="highlight"><pre><span></span><code><span class="n">CO_TMR</span><span class="w">     </span><span class="o">*</span><span class="n">tmr</span><span class="p">;</span><span class="w"></span>
<span class="n">CPU_INT16S</span><span class="w">  </span><span class="n">aid</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w">    </span><span class="n">max</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tmr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">;</span><span class="w"></span>
<span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetTicks</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_1MS</span><span class="p">);</span><span class="w"></span>
<span class="n">aid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrCreate</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">AppEmcyFunc</span><span class="p">,</span><span class="w"> </span><span class="mh">0xdead</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aid</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">AppCritFunc</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrDelete</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="n">aid</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* error during deleting the timed action */</span><span class="w"></span>

<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* error during creation of timed action */</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example assumes, that the timer callback function <code>AppEmcyFunc()</code> and the application function <code>AppCritFunc()</code> are implemented with the correct prototype. The hardware timer is configured with sufficient timer clock frequency to achieve the 50ms resolution.</p>
</div>
<h4 id="cotmrgetmintime">COTmrGetMinTime()<a class="headerlink" href="#cotmrgetmintime" title="Permanent link">#</a></h4>
<p>This function returns the time interval in the given unit, which represents a single configured timer tick.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">COTmrGetMinTime</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w">   </span><span class="o">*</span><span class="n">tmr</span><span class="p">,</span><span class="w"></span>
<span class="w">                         </span><span class="kt">uint32_t</span><span class="w">  </span><span class="n">unit</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
<tr>
<td>unit</td>
<td>unit of given time (<code>CO_TMR_UNIT_1MS</code> or <code>CO_TMR_UNIT_100US</code>)</td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li><code>&gt;0</code> : time value in the given time interval for a single timer tick</li>
<li><code>=0</code> : a single given time interval unit is not possible with the used timer</li>
</ul>
<p><strong>Example</strong></p>
<p>The following example calculates the smallest possible time interval in 100us.</p>
<div class="highlight"><pre><span></span><code><span class="n">CO_TMR</span><span class="w">  </span><span class="o">*</span><span class="n">tmr</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">min_100us</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tmr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">min_100us</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetMinTime</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_100US</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">min_100us</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* timer is not configured */</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* you can use time intervals with multiple of min_100us */</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
</code></pre></div>
<h4 id="cotmrgetticks">COTmrGetTicks()<a class="headerlink" href="#cotmrgetticks" title="Permanent link">#</a></h4>
<p>This function is used within the CANopen stack for calculating timeouts, event-times and other needed time intervals.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int32_t</span><span class="w"> </span><span class="nf">COTmrGetTicks</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w">   </span><span class="o">*</span><span class="n">tmr</span><span class="p">,</span><span class="w"></span>
<span class="w">                      </span><span class="kt">uint16_t</span><span class="w">  </span><span class="n">time</span><span class="p">,</span><span class="w"></span>
<span class="w">                      </span><span class="kt">uint32_t</span><span class="w">  </span><span class="n">unit</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
<tr>
<td>time</td>
<td>time interval as a value of given units</td>
</tr>
<tr>
<td>unit</td>
<td>unit of given time (<code>CO_TMR_UNIT_1MS</code> or <code>CO_TMR_UNIT_100US</code>)</td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li><code>&gt;0</code> : timer ticks for the given time interval</li>
<li><code>=0</code> : given time interval is not possible with the used timer</li>
</ul>
<p><strong>Example</strong></p>
<p>The following example calculates the number of ticks for 10.7ms and for 2.5s.</p>
<div class="highlight"><pre><span></span><code><span class="n">CO_TMR</span><span class="w">  </span><span class="o">*</span><span class="n">tmr</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">tick_10_7ms</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">tick_2500ms</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tmr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tick_10_7ms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetTicks</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_100US</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tick_10_7ms</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* time interval 10.7ms is not possible */</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* you can use the time interval 10.7ms */</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
<span class="n">tick_2500ms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrGetTicks</span><span class="p">(</span><span class="n">tmr</span><span class="p">,</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w"> </span><span class="n">CO_TMR_UNIT_1MS</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tick_2500ms</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* time interval 2.5s is not possible */</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/* you can use the time interval 2.5s */</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example assumes that the CANopen node is already initialized with <code>CONodeInit()</code> because the specified frequency in the specification structure is the foundation for these calculations.</p>
</div>
<h4 id="cotmrprocess">COTmrProcess()<a class="headerlink" href="#cotmrprocess" title="Permanent link">#</a></h4>
<p>The function is used decouple the generation of the periodic time base and the timed action processing.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">COTmrProcess</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w"> </span><span class="o">*</span><span class="n">tmr</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li>none</li>
</ul>
<p><strong>Example</strong></p>
<p>The timed action processing must be called cyclic. Due to the timer management, the calling sequence is irrelevant. Therefore the function may be called in the background loop of the application:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">COTmrProcess</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="cotmrservice">COTmrService()<a class="headerlink" href="#cotmrservice" title="Permanent link">#</a></h4>
<p>The function is used to generate a periodic time base and must be called cyclic.</p>
<p><strong>Prototype</strong></p>
<div class="highlight"><pre><span></span><code><span class="kt">int16_t</span><span class="w"> </span><span class="nf">COTmrService</span><span class="p">(</span><span class="n">CO_TMR</span><span class="w"> </span><span class="o">*</span><span class="n">tmr</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>Arguments</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tmr</td>
<td>pointer to timer object</td>
</tr>
</tbody>
</table>
<p><strong>Returned Value</strong></p>
<ul>
<li><code>=0</code> : no timer is elapsed</li>
<li><code>&gt;0</code> : at least one timer is elapsed</li>
<li><code>&lt;0</code> : an error is detected</li>
</ul>
<p><strong>Example</strong></p>
<p>The following interrupt service function generates the time base for the CANopen timed actions with periodic calls of the function <code>COTmrService()</code>. When using an RTOS, the return value may be used to decide of triggering a separate timer task to process the elapsed events.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">HardwareTimerISR</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">num</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">COTmrService</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">AppNode</span><span class="p">.</span><span class="n">Tmr</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="cm">/* post an event to the timer processing task */</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../interface/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CAN Interface" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CAN Interface
            </div>
          </div>
        </a>
      
      
        
        <a href="../parameter/" class="md-footer__link md-footer__link--next" aria-label="Next: Parameter Storage" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Parameter Storage
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; by <a href="https://www.embedded-office.com/">Embedded Office</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://canopen-stack.org/" target="_blank" rel="noopener" title="canopen-stack.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/embedded-office/canopen-stack/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/company/embedded-office/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "header.autohide"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>